-- Создаем пользователя с правами администратора
INSERT INTO users (id, login, password, permission, created_at, updated_at)
VALUES (
    '11111111-1111-1111-1111-111111111111',  -- фиксированный UUID для удобства
    'admin',                                 -- логин: admin
    -- Простой пароль в открытом виде для упрощения тестирования
    'admin123',                              -- простой пароль без хеширования  
    'admin',                                 -- права администратора
    NOW(),                                   -- время создания
    NOW()                                    -- время обновления
)
ON CONFLICT (id) DO UPDATE 
SET password = 'admin123', permission = 'admin', updated_at = NOW();  -- обновляем пароль, если админ уже существует

-- Также создаем сессию для этого пользователя
INSERT INTO sessions (id, user_id, token, expires_at)
VALUES (
    '22222222-2222-2222-2222-222222222222',  -- фиксированный UUID для сессии
    '11111111-1111-1111-1111-111111111111',  -- ID пользователя-администратора
    '33333333-3333-3333-3333-333333333333',  -- токен
    NOW() + INTERVAL '1 year'                -- срок действия - 1 год
)
ON CONFLICT (id) DO UPDATE
SET token = '33333333-3333-3333-3333-333333333333', expires_at = NOW() + INTERVAL '1 year';  -- обновляем токен, если сессия уже существует 